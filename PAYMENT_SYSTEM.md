# üí≥ –°–ò–°–¢–ï–ú–ê –†–ï–ê–õ–¨–ù–´–• –ü–õ–ê–¢–ï–ñ–ï–ô - Telegram Stars Invoice

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:

### ‚úÖ –°–æ–∑–¥–∞–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–ª–∞—Ç–µ–∂–µ–π `handlers/payments.py`
- **pre_checkout_query** - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ –ø–ª–∞—Ç–µ–∂—É
- **successful_payment** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞
  - –î–ª—è –º–∞–≥–∞–∑–∏–Ω–∞: —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–æ–∫—É–ø–∫—É –≤ –∏—Å—Ç–æ—Ä–∏—é
  - –î–ª—è —Ä—É–ª–µ—Ç–∫–∏: –ø—Ä–æ–≤–æ–¥–∏—Ç —Ä–æ–∑—ã–≥—Ä—ã—à –∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—Ä–∏–∑

### ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –º–∞–≥–∞–∑–∏–Ω–∞ `handlers/shop.py`
- –í–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–π –ø–æ–∫—É–ø–∫–∏ —á–µ—Ä–µ–∑ –±–∞–ª–∞–Ω—Å ‚Üí **–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å—á—ë—Ç (Invoice)**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `bot.send_invoice()` —Å –≤–∞–ª—é—Ç–æ–π `XTR` (Telegram Stars)
- –§–æ—Ä–º–∞—Ç –ø–ª–∞—Ç–µ–∂–∞: `payload="shop_item_{item_id}"`

### ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ —Ä—É–ª–µ—Ç–∫–∏ `handlers/roulette.py`
- –ü–æ–∫—É–ø–∫–∞ –±–∏–ª–µ—Ç–∞ ‚Üí **–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å—á—ë—Ç –Ω–∞ –æ–ø–ª–∞—Ç—É**
- –ü–æ—Å–ª–µ –ø–ª–∞—Ç–µ–∂–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ **–∫—Ä—É—Ç–∏—Ç —Ä—É–ª–µ—Ç–∫—É**
- –ù–∏–∑–∫–∏–µ —à–∞–Ω—Å—ã –≤—ã–∏–≥—Ä—ã—à–∞ (15-50%) –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –±–∏–ª–µ—Ç–∞
- –ü—Ä–∏–∑—ã - —Ç–æ–ª—å–∫–æ Telegram Gifts –∏–∑ –º–∞–≥–∞–∑–∏–Ω–∞

### ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω –≥–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª `main.py`
- –ü–æ–¥–∫–ª—é—á–µ–Ω –Ω–æ–≤—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `payments.router`
- –í—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ

## üéØ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### –°—Ü–µ–Ω–∞—Ä–∏–π –ø–æ–∫—É–ø–∫–∏ –≤ –º–∞–≥–∞–∑–∏–Ω–µ:
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–ö—É–ø–∏—Ç—å" ‚Üí üõí –ú–∞–≥–∞–∑–∏–Ω (shop.py)
2. shop.py –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å—á—ë—Ç: bot.send_invoice(payload="shop_item_1")
3. Telegram –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –æ–∫–Ω–æ –æ–ø–ª–∞—Ç—ã "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–≤—ë–∑–¥—ã"
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–û—Ç–ø—Ä–∞–≤–∏—Ç—å" –∏ –ø–ª–∞—Ç–∏—Ç –∏–∑ —Å–≤–æ–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞ Telegram
5. payments.py –ø–æ–ª—É—á–∞–µ—Ç successful_payment callback
6. –ë–æ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç: "‚úÖ –ü–æ–∫—É–ø–∫–∞ —É—Å–ø–µ—à–Ω–∞! –í—ã –∫—É–ø–∏–ª–∏..."
```

### –°—Ü–µ–Ω–∞—Ä–∏–π —Ä—É–ª–µ—Ç–∫–∏:
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–ö—É–ø–∏—Ç—å –±–∏–ª–µ—Ç" ‚Üí üé∞ –†—É–ª–µ—Ç–∫–∞ (roulette.py)
2. roulette.py –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å—á—ë—Ç: bot.send_invoice(payload="roulette_ticket_1")
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–ª–∞—Ç–∏—Ç —á–µ—Ä–µ–∑ Telegram Stars
4. payments.py –ø–æ–ª—É—á–∞–µ—Ç successful_payment
5. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫—Ä—É—Ç–∏—Ç —Ä—É–ª–µ—Ç–∫—É (win_chance: 15-50%)
6. –ï—Å–ª–∏ –≤—ã–∏–≥—Ä–∞–ª ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ø—Ä–∏–∑–æ–º
7. –ï—Å–ª–∏ –ø—Ä–æ–∏–≥—Ä–∞–ª ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç "üò¢ –ù–µ –≤—ã–∏–≥—Ä–∞–ª–∏ –≤ —ç—Ç–æ—Ç —Ä–∞–∑"
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:

- ‚úÖ **provider_token=""** - –¥–ª—è Telegram Stars –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–µ
- ‚úÖ **currency="XTR"** - –≤–∞–ª—é—Ç–∞ Telegram Stars
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è** —á–µ—Ä–µ–∑ `pre_checkout_query`
- ‚úÖ **–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ payload** –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞

## üìã –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥–∞ `config.py`:

```python
# –ú–∞–≥–∞–∑–∏–Ω - —Ü–µ–Ω—ã –≤ Telegram Stars
SHOP_ITEMS = [
    {"id": 1, "name": "–ú–µ–¥–≤–µ–¥—å üêª", "price": 99, ...},
    ...
]

# –†—É–ª–µ—Ç–∫–∞ - —Ü–µ–Ω—ã –∏ —à–∞–Ω—Å—ã –≤—ã–∏–≥—Ä—ã—à–∞
ROULETTE_TICKETS = [
    {"id": 1, "price": 99, "win_chance": 15},   # 15% —à–∞–Ω—Å
    {"id": 2, "price": 199, "win_chance": 25},  # 25% —à–∞–Ω—Å
    {"id": 3, "price": 499, "win_chance": 35},  # 35% —à–∞–Ω—Å
    {"id": 4, "price": 999, "win_chance": 50},  # 50% —à–∞–Ω—Å
]
```

## üöÄ –°—Ç–∞—Ç—É—Å:

- ‚úÖ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –∏ —Å–ª—É—à–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø–ª–∞—Ç–µ–∂–µ–π –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞
- ‚úÖ –í—Å–µ —Ñ–∞–π–ª—ã —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏ –≤–µ—Ä–Ω—ã
- ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –≤ Telegram

## üìù –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –±–æ—Ç—É
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–ú–∞–≥–∞–∑–∏–Ω" –∏–ª–∏ "–†—É–ª–µ—Ç–∫–∞"
3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Ç–æ–≤–∞—Ä/–±–∏–ª–µ—Ç
4. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ö—É–ø–∏—Ç—å"
5. **–ü–æ—è–≤–∏—Ç—Å—è —Å—á—ë—Ç –Ω–∞ –æ–ø–ª–∞—Ç—É –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö Telegram Stars**
6. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–ª–∞—Ç—ë–∂
7. –ë–æ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–∫—É–ø–∫—É –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç

## üí° –ü—Ä–∏–º–µ—á–∞–Ω–∏—è:

- –í—Å–µ –ø–ª–∞—Ç–µ–∂–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ **–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π Telegram API**
- –î–µ–Ω—å–≥–∏ –ø–æ—Å—Ç—É–ø–∞—é—Ç –≤ –∫–æ—à–µ–ª—ë–∫ –ø–æ–ª—É—á–∞—Ç–µ–ª—è (—É–∫–∞–∑–∞–Ω –≤ BotFather)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç **–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ–ø–ª–∞—Ç—ã Telegram**
- –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–µ—Ñ—É–Ω–¥–æ–≤ –∏ –æ—Ç–º–µ–Ω—ã –ø–ª–∞—Ç–µ–∂–µ–π —á–µ—Ä–µ–∑ Telegram
